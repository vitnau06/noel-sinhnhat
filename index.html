<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gi√°ng sinh an l√†nh</title>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      height: calc(var(--vh, 1vh) * 100);
      overflow: hidden;
    }

    /* ===== SECTION ===== */
    section {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 1.5s ease;
    }

    section.active {
      opacity: 1;
      pointer-events: auto;
    }

    /* ===== GIFT ===== */
    .gift-box {
      position: relative;
      width: 140px;
      height: 120px;
      cursor: pointer;
    }

    .gift-body {
      width: 100%;
      height: 100%;
      background: #c1121f;
      border-radius: 12px;
      position: absolute;
      bottom: 0;
    }

    .gift-lid {
      width: 150px;
      height: 40px;
      background: #e63946;
      position: absolute;
      top: -30px;
      left: -5px;
      border-radius: 12px;
      transform-origin: left center;
      transition: transform 1s ease;
    }

    .ribbon {
      position: absolute;
      width: 16px;
      height: 100%;
      background: gold;
      left: 50%;
      transform: translateX(-50%);
    }

    .gift-box.open .gift-lid {
      transform: rotate(-40deg) translate(-20px, -20px);
    }

    .tap {
      margin-top: 15px;
      font-size: 1.2rem;
      opacity: .8;
    }

    /* ===== NOEL ===== */
    #noel {
      background: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);
      color: white;
    }

    /* ===== BIRTHDAY ===== */
    #birthday {
      background: linear-gradient(to right, #ff758c, #ff7eb3);
      color: white;
    }

    h1 {
      font-size: clamp(2rem, 5vw, 3rem);
      margin-bottom: 15px;
    }

    p {
      font-size: clamp(1rem, 3.5vw, 1.3rem);
      line-height: 1.6;
    }

    /* ===== CAKE ===== */
    .cake {
      font-size: 4rem;
      animation: bounce 1s infinite alternate;
    }

    @keyframes bounce {
      to {
        transform: translateY(-12px);
      }
    }

    /* ===== SNOW ===== */
    .snowflake {
      position: fixed;
      top: -10px;
      color: white;
      animation: fall linear infinite;
      pointer-events: none;
      will-change: transform;
    }

    @keyframes fall {
      to {
        transform: translateY(110vh);
      }
    }

    /* ===== CONFETTI ===== */
    .confetti {
      position: fixed;
      width: 8px;
      height: 8px;
      top: -10px;
      animation: confettiFall linear infinite;
      pointer-events: none;
      will-change: transform;
    }

    @keyframes confettiFall {
      to {
        transform: translateY(110vh) rotate(360deg);
      }
    }

    /* ===== FIREWORK ===== */
    .firework {
      position: fixed;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      pointer-events: none;
      animation: explode 1s ease-out forwards;
    }

    @keyframes explode {
      to {
        transform: scale(15);
        opacity: 0;
      }
    }

    /* ===== FLOAT TEXT ===== */
    .float-text {
      position: fixed;
      bottom: -40px;
      font-size: 1.5rem;
      animation: floatUp 4s linear forwards;
      pointer-events: none;
    }

    @keyframes floatUp {
      to {
        transform: translateY(-120vh);
        opacity: 0;
      }
    }
  </style>
</head>

<body>

  <!-- üéÅ GIFT -->
  <section id="gift" class="active">
    <div class="gift-box" id="giftBox">
      <div class="gift-lid"></div>
      <div class="gift-body">
        <div class="ribbon"></div>
      </div>
    </div>
    <div class="tap">Ch·∫°m ƒë·ªÉ m·ªü qu√† üéÑ</div>
  </section>

  <!-- üéÑ NOEL -->
  <section id="noel">
    <h1>üéÑ Merry Christmas üéÑ</h1>
    <p>Ch√∫c b·∫°n m·ªôt m√πa Gi√°ng Sinh an l√†nh,<br>·∫•m √°p v√† h·∫°nh ph√∫c ‚ú®</p>
  </section>

  <!-- üéÇ BIRTHDAY -->
  <section id="birthday">
    <h1>üéÇ Happy Birthday üéâ</h1>
    <div class="cake">üéÇ</div>
    <p>
      H√¥m nay kh√¥ng ch·ªâ l√† Noel‚Ä¶<br><br>
      üëâ M√Ä C√íN L√Ä SINH NH·∫¨T C·ª¶A B·∫†N ü•≥<br><br>
      Ch√∫c b·∫°n lu√¥n vui v·∫ª v√† h·∫°nh ph√∫c ‚ù§Ô∏è<br><br>
      ‚Äî From: <b>V·ªãt N√¢u üòÑ</b>
    </p>
  </section>

  <!-- üîä MUSIC -->
  <audio id="musicNoel" loop playsinline webkit-playsinline preload="auto">
    <source src="audio/noen.mp3" type="audio/mpeg">
  </audio>

  <audio id="musicBirthday" loop playsinline webkit-playsinline preload="auto">
    <source src="audio/snvv.mp3" type="audio/mpeg">
  </audio>

  <script>
    /* ===== FIX iOS HEIGHT ===== */
    function fixIOSHeight() {
      document.documentElement.style.setProperty('--vh', window.innerHeight * 0.01 + 'px');
    }
    fixIOSHeight();
    window.addEventListener('resize', fixIOSHeight);

    /* ===== AUDIO UNLOCK iOS ===== */
    function unlockAudio(audio) {
      const unlock = () => {
        audio.play().then(() => {
          audio.pause();
          audio.currentTime = 0;
        }).catch(() => { });
        document.removeEventListener('touchstart', unlock);
        document.removeEventListener('click', unlock);
      };
      document.addEventListener('touchstart', unlock);
      document.addEventListener('click', unlock);
    }

    /* ===== ELEMENT ===== */
    const gift = document.getElementById('gift');
    const giftBox = document.getElementById('giftBox');
    const noel = document.getElementById('noel');
    const birthday = document.getElementById('birthday');
    const musicNoel = document.getElementById('musicNoel');
    const musicBirthday = document.getElementById('musicBirthday');



    let opened = false;

    giftBox.addEventListener('pointerdown', openGift);

    function openGift() {
      if (opened) return;
      opened = true;

      /* üéÑ PLAY NOEL NGAY KHI CLICK */
      musicNoel.pause();
      musicNoel.currentTime = 0;
      musicNoel.volume = 1;
      musicNoel.play().catch(err => console.log(err));

      giftBox.classList.add('open');

      // HI·ªÜN NOEL
      setTimeout(() => {
        gift.classList.remove('active');
        noel.classList.add('active');
        startSnow();

        // CHUY·ªÇN SANG SINH NH·∫¨T
        setTimeout(() => {
          noel.classList.remove('active');
          birthday.classList.add('active');

          /* üéÇ ƒê·ªîI NH·∫†C */
          musicNoel.pause();
          musicBirthday.pause();
          musicBirthday.currentTime = 0;
          musicBirthday.volume = 1;
          musicBirthday.play().catch(err => console.log(err));

          startConfetti();
          startFirework();
          startFloatingText();

        }, 6000);
      }, 800);
    }


    /* ===== EFFECTS ===== */
    function startSnow() {
      setInterval(() => {
        const s = document.createElement('div');
        s.className = 'snowflake';
        s.textContent = '‚ùÑ';
        s.style.left = Math.random() * innerWidth + 'px';
        s.style.fontSize = 10 + Math.random() * 20 + 'px';
        s.style.animationDuration = 3 + Math.random() * 5 + 's';
        document.body.appendChild(s);
        setTimeout(() => s.remove(), 8000);
      }, 300);
    }

    function startConfetti() {
      setInterval(() => {
        const c = document.createElement('div');
        c.className = 'confetti';
        c.style.left = Math.random() * innerWidth + 'px';
        c.style.background = `hsl(${Math.random() * 360},100%,50%)`;
        c.style.animationDuration = 3 + Math.random() * 3 + 's';
        document.body.appendChild(c);
        setTimeout(() => c.remove(), 6000);
      }, 250);
    }

    function startFirework() {
      setInterval(() => {
        const f = document.createElement('div');
        f.className = 'firework';
        f.style.left = Math.random() * innerWidth + 'px';
        f.style.top = Math.random() * innerHeight * 0.5 + 'px';
        f.style.background = `hsl(${Math.random() * 360},100%,50%)`;
        document.body.appendChild(f);
        setTimeout(() => f.remove(), 1000);
      }, 800);
    }

    const messages = ["üéÑ Merry Christmas", "üéÇ Happy Birthday", "üéÅ H·ªçc Gi·ªèi", "üíñ Xinh ƒê·∫πp"];
    function startFloatingText() {
      setInterval(() => {
        const t = document.createElement('div');
        t.className = 'float-text';
        t.textContent = messages[Math.floor(Math.random() * messages.length)];
        t.style.left = Math.random() * 80 + 'vw';
        document.body.appendChild(t);
        setTimeout(() => t.remove(), 4000);
      }, 1200);
    }

    /* ===== AUDIO FADE ===== */
    function fadeIn(audio, duration = 1500) {
      let step = 0.05;
      let interval = duration / (1 / step);
      const fade = setInterval(() => {
        if (audio.volume < 1) audio.volume = Math.min(audio.volume + step, 1);
        else clearInterval(fade);
      }, interval);
    }

    function fadeOut(audio, duration = 1500) {
      let step = 0.05;
      let interval = duration / (1 / step);
      const fade = setInterval(() => {
        if (audio.volume > 0) audio.volume = Math.max(audio.volume - step, 0);
        else {
          audio.pause();
          audio.currentTime = 0;
          clearInterval(fade);
        }
      }, interval);
    }
  </script>

</body>

</html>
